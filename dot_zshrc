# --- ZSH SETTINGS ---
DISABLE_AUTO_UPDATE="true"
DISABLE_MAGIC_FUNCTIONS="true" # Speed up paste/completion

export ZSH=$HOME/.oh-my-zsh
ZSH_THEME="" # Disabled to allow Starship to take over

# --- PLUGINS ---
# Minimized for performance. 
# Warp handles syntax highlighting and autosuggestions natively.
plugins=(
  git
  sudo
  extract
  copyfile
  copybuffer
  history
)

# --- HISTORY SETTINGS ---
# Crucial for Warp and Atuin to function correctly
HISTFILE="$HOME/.zsh_history"
HISTSIZE=50000
SAVEHIST=50000
setopt HIST_EXPIRE_DUPS_FIRST
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_FIND_NO_DUPS
setopt HIST_SAVE_NO_DUPS
setopt SHARE_HISTORY

# --- SOURCES ---
source $HOME/.profile
source $ZSH/oh-my-zsh.sh

# --- MODERN TOOLS (PERFORMANCE OPTIMIZED) ---

# 1. FNM (Fast Node Manager) - Replaces NVM
FNM_PATH="$HOME/.local/share/fnm"
if [ -d "$FNM_PATH" ]; then
  export PATH="$FNM_PATH:$PATH"
  eval "$(fnm env --use-on-cd)"
fi

# 2. Zoxide - Replaces Autojump
eval "$(zoxide init zsh)"
alias j='z'

# 3. Atuin - Shell History Sync
if command -v atuin &> /dev/null; then
    eval "$(atuin init zsh)"
fi

# 4. Bun Completions (Lazy Load via fpath)
[ -d "$HOME/.bun" ] && fpath=($HOME/.bun $fpath)

# 5. FZF - Fuzzy Finder
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# --- THEME ---
# Initialize Starship (Must be at the end)
eval "$(starship init zsh)"
