# ~/.profile: Executed for login shells.

# Check if running in Bash
if [ -n "$BASH_VERSION" ]; then
    if [ -f "$HOME/.bashrc" ]; then
         . "$HOME/.bashrc"
    fi
fi

# --- PATH CONFIGURATION ---
# Add user bin directories if they exist
[ -d "$HOME/bin" ] && PATH="$HOME/bin:$PATH"
[ -d "$HOME/.local/bin" ] && PATH="$HOME/.local/bin:$PATH"

# Add development tools to PATH (Flutter, Deno, Bun, NPM, Pulumi, etc.)
PATH="$PATH:$HOME/flutter/bin:$HOME/bin/chezmoi:$HOME/.deno/bin:$HOME/.pub-cache/bin:$HOME/.bun/bin:$HOME/.npm-global/bin"
PATH="$PATH:$HOME/.local/share/JetBrains/Toolbox/scripts:$HOME/lua-language-server/bin:$HOME/.pulumi/bin"

# Android SDK
export ANDROID_HOME="/mnt/XPG-Data/Android/sdk"
if [ -d "$ANDROID_HOME" ]; then
    PATH="$PATH:$ANDROID_HOME/tools/:$ANDROID_HOME/platform-tools/"
fi

# --- JAVA CONFIGURATION ---
# Dynamic JAVA_HOME resolution
if command -v java > /dev/null; then
    _JAVA_BIN=$(readlink -f $(which java))
    export JAVA_HOME=$(dirname $(dirname $_JAVA_BIN))
    PATH="$PATH:$JAVA_HOME/bin"
fi

# --- ENVIRONMENT VARIABLES ---
export OLLAMA_MODELS="/mnt/SEAGATE-Data/ollama"
export OLLAMA_HOST="0.0.0.0"

# Rust / Cargo
[ -s "$HOME/.cargo/env" ] && source "$HOME/.cargo/env"

export PATH

# Load secrets and aliases
[ -f "$HOME/.profile_secrets" ] && source "$HOME/.profile_secrets"
[ -f "$HOME/.bash_aliases" ] && source "$HOME/.bash_aliases"
